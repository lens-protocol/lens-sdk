# query fragments
fragment OptimisticStatusResult on OptimisticStatusResult {
  value
  isFinalisedOnchain
}

fragment Erc20 on Erc20 {
  name
  symbol
  decimals
  contract {
    ...NetworkAddress
  }
}

# fragment FiatAmount on FiatAmount {
#   asset {
#     ...Fiat
#   }
#   value
# }

# fragment Fiat on Fiat {
#   name
#   symbol
#   decimals
# }

fragment Amount on Amount {
  asset {
    ...Erc20
  }
  value
  # rate(currency: USD) {
  #   ...FiatAmount
  # }
}

fragment FeeFollowModuleSettings on FeeFollowModuleSettings {
  amount {
    ...Amount
  }
  contract {
    ...NetworkAddress
  }
  recipient
}

fragment RevertFollowModuleSettings on RevertFollowModuleSettings {
  contract {
    ...NetworkAddress
  }
}

fragment UnknownFollowModuleSettings on UnknownFollowModuleSettings {
  contract {
    ...NetworkAddress
  }
  followModuleReturnData
}

fragment Gasless on Gasless {
  enabled
  relay {
    ...NetworkAddress
  }
}

fragment NetworkAddress on NetworkAddress {
  address
  chainId
}

# media
fragment Image on Image {
  url
  imageMimeType: mimeType
  width
  height
}

fragment Video on Video {
  url
  videoMimeType: mimeType
}

fragment VideoSet on VideoSet {
  rawURI
  video {
    ...Video
  }
  altTag
}

fragment Audio on Audio {
  url
  audioMimeType: mimeType
}

fragment AudioSet on AudioSet {
  rawURI
  audio {
    ...Audio
  }
}

# profile
fragment ProfileCoverSet on ImageSet {
  rawURI
  image {
    ...Image
  }
  altTag
  # TODO: uncomment on field resolver fix
  # transformed(input: $profileCoverTransform) {
  #   ...Image
  # }
}

fragment ProfilePictureSet on ImageSet {
  rawURI
  image {
    ...Image
  }
  altTag
  # TODO: uncomment on field resolver fix
  # transformed(input: $profilePictureTransform) {
  #   ...Image
  # }
}

fragment ProfileStats on ProfileStats {
  id
  followers(request: $profileStatsArg)
  following(request: $profileStatsArg)
  comments(request: $profileStatsArg)
  posts(request: $profileStatsArg)
  mirrors(request: $profileStatsArg)
  quotes(request: $profileStatsArg)
  mirrors(request: $profileStatsArg)
  quotes(request: $profileStatsArg)
  publications(request: $profileStatsArg)
  upvoteReactions: reactions(request: { type: UPVOTE })
  downvoteReactions: reactions(request: { type: DOWNVOTE })
  countOpenActions(request: $profileStatsCountOpenActionArgs)
}

fragment ProfileFields on Profile {
  __typename
  id
  metadata {
    rawURI
    displayName
    bio
  }
  handle
  ownedBy {
    ...NetworkAddress
  }
  gasless {
    ...Gasless
  }
  followModule {
    ... on FeeFollowModuleSettings {
      ...FeeFollowModuleSettings
    }
    ... on RevertFollowModuleSettings {
      ...RevertFollowModuleSettings
    }
    ... on UnknownFollowModuleSettings {
      ...UnknownFollowModuleSettings
    }
  }
  followNftAddress {
    ...NetworkAddress
  }
  onchainIdentity {
    proofOfHumanity
    ens {
      name
    }
    sybilDotOrg {
      source {
        twitter {
          handle
        }
      }
    }
    worldcoin {
      isHuman
    }
  }
  interests
  operations {
    id
    isBlockedByMe {
      ...OptimisticStatusResult
    }
    isFollowedByMe {
      ...OptimisticStatusResult
    }
    isFollowingMe {
      ...OptimisticStatusResult
    }
    canBlock
    canUnblock
    canFollow
    canUnfollow
  }
  guardian {
    protected
    cooldownEndsOn
  }
  stats(request: $profileStatsArg) {
    ...ProfileStats
  }
  invitesLeft
  createdAt
}

fragment Profile on Profile {
  ...ProfileFields

  invitedBy {
    ...ProfileFields
  }
}

fragment PaginatedResultInfo on PaginatedResultInfo {
  prev
  next
}

fragment App on App {
  id
}

fragment MomokaInfo on MomokaInfo {
  proof
}

# reference modules
fragment FollowOnlyReferenceModuleSettings on FollowOnlyReferenceModuleSettings {
  contract {
    ...NetworkAddress
  }
}

fragment DegreesOfSeparationReferenceModuleSettings on DegreesOfSeparationReferenceModuleSettings {
  contract {
    ...NetworkAddress
  }
  commentsRestricted
  mirrorsRestricted
  degreesOfSeparation
}

fragment UnknownReferenceModuleSettings on UnknownReferenceModuleSettings {
  contract {
    ...NetworkAddress
  }
  referenceModuleReturnData
}

# open action modules
fragment SimpleCollectOpenActionSettings on SimpleCollectOpenActionSettings {
  contract {
    ...NetworkAddress
  }
  amountOptional: amount {
    ...Amount
  }
  recipient
  referralFee
  followerOnly
  collectLimitOptional: collectLimit
  endTimestampOptional: endTimestamp
}

fragment MultirecipientFeeCollectOpenActionSettings on MultirecipientFeeCollectOpenActionSettings {
  contract {
    ...NetworkAddress
  }
  amount {
    ...Amount
  }
  recipients {
    recipient
    split
  }
  referralFee
  followerOnly
  collectLimitOptional: collectLimit
  endTimestampOptional: endTimestamp
}

fragment UnknownOpenActionModuleSettings on UnknownOpenActionModuleSettings {
  contract {
    ...NetworkAddress
  }
  openActionModuleReturnData
}

fragment LegacyFreeCollectModuleSettings on LegacyFreeCollectModuleSettings {
  contract {
    ...NetworkAddress
  }
  followerOnly
}

fragment LegacyFeeCollectModuleSettings on LegacyFeeCollectModuleSettings {
  contract {
    ...NetworkAddress
  }
  amount {
    ...Amount
  }
  recipient
  referralFee
  followerOnly
}

fragment LegacyLimitedFeeCollectModuleSettings on LegacyLimitedFeeCollectModuleSettings {
  contract {
    ...NetworkAddress
  }
  collectLimit
  amount {
    ...Amount
  }
  recipient
  referralFee
  followerOnly
}

fragment LegacyLimitedTimedFeeCollectModuleSettings on LegacyLimitedTimedFeeCollectModuleSettings {
  contract {
    address
  }
  collectLimit
  amount {
    ...Amount
  }
  recipient
  referralFee
  followerOnly
  endTimestamp
}

fragment LegacyRevertCollectModuleSettings on LegacyRevertCollectModuleSettings {
  contract {
    ...NetworkAddress
  }
}

fragment LegacyTimedFeeCollectModuleSettings on LegacyTimedFeeCollectModuleSettings {
  contract {
    ...NetworkAddress
  }
  amount {
    ...Amount
  }
  recipient
  referralFee
  followerOnly
  endTimestamp
}

fragment LegacyMultirecipientFeeCollectModuleSettings on LegacyMultirecipientFeeCollectModuleSettings {
  contract {
    ...NetworkAddress
  }
  amount {
    ...Amount
  }
  recipients {
    recipient
    split
  }
  referralFee
  followerOnly
  collectLimitOptional: collectLimit
  endTimestampOptional: endTimestamp
}

fragment LegacySimpleCollectModuleSettings on LegacySimpleCollectModuleSettings {
  contract {
    ...NetworkAddress
  }
  amountOptional: amount {
    ...Amount
  }
  recipient
  referralFee
  followerOnly
  collectLimitOptional: collectLimit
  endTimestampOptional: endTimestamp
}

fragment LegacyERC4626FeeCollectModuleSettings on LegacyERC4626FeeCollectModuleSettings {
  contract {
    ...NetworkAddress
  }
  vault {
    ...NetworkAddress
  }
  amount {
    ...Amount
  }
  recipient
  referralFee
  followerOnly
  collectLimitOptional: collectLimit
  endTimestampOptional: endTimestamp
}

fragment LegacyAaveFeeCollectModuleSettings on LegacyAaveFeeCollectModuleSettings {
  contract {
    ...NetworkAddress
  }
  amount {
    ...Amount
  }
  recipient
  referralFee
  followerOnly
  collectLimitOptional: collectLimit
  endTimestampOptional: endTimestamp
}

fragment UnknownOpenActionResult on UnknownOpenActionResult {
  address
  category
  initReturnData
}

fragment KnownCollectOpenActionResult on KnownCollectOpenActionResult {
  type
}

fragment OpenActionResult on OpenActionResult {
  ... on KnownCollectOpenActionResult {
    ...KnownCollectOpenActionResult
  }
  ... on UnknownOpenActionResult {
    ...UnknownOpenActionResult
  }
}

fragment CanDecryptResponse on CanDecryptResponse {
  result
  reasons
  extraDetails
}

fragment PublicationOperations on PublicationOperations {
  id
  isNotInterested
  hasBookmarked
  hasReported
  canAct(request: $publicationOperationsActedArgs)
  hasActed(request: $publicationOperationsActedArgs) {
    ...OptimisticStatusResult
  }
  actedOn(request: $publicationOperationsActedArgs) {
    ...OpenActionResult
  }
  hasUpvoted: hasReacted(request: { type: UPVOTE })
  hasDownvoted: hasReacted(request: { type: DOWNVOTE })
  canComment
  canMirror
  hasMirrored
  canDecrypt {
    ...CanDecryptResponse
  }
}

# gated content
fragment PublicationMetadataV3LitEncryption on PublicationMetadataV3LitEncryption {
  encryptionKey
  accessCondition {
    ... on NftOwnershipCondition {
      ...NftOwnershipCondition
    }
    ... on Erc20OwnershipCondition {
      ...Erc20OwnershipCondition
    }
    ... on EoaOwnershipCondition {
      ...EoaOwnershipCondition
    }
    ... on ProfileOwnershipCondition {
      ...ProfileOwnershipCondition
    }
    ... on FollowCondition {
      ...FollowCondition
    }
    ... on CollectCondition {
      ...CollectCondition
    }
    ... on AndCondition {
      ...AndCondition
    }
    ... on OrCondition {
      ...OrCondition
    }
  }
}

fragment NftOwnershipCondition on NftOwnershipCondition {
  contract {
    ...NetworkAddress
  }
  contractType
  tokenIds
}

fragment Erc20OwnershipCondition on Erc20OwnershipCondition {
  amount {
    ...Amount
  }
  condition
}

fragment EoaOwnershipCondition on EoaOwnershipCondition {
  address
}

fragment ProfileOwnershipCondition on ProfileOwnershipCondition {
  profileId
}

fragment FollowCondition on FollowCondition {
  follow
}

fragment CollectCondition on CollectCondition {
  publicationId
  thisPublication
}

fragment AndCondition on AndCondition {
  criteria {
    ... on NftOwnershipCondition {
      ...NftOwnershipCondition
    }
    ... on Erc20OwnershipCondition {
      ...Erc20OwnershipCondition
    }
    ... on EoaOwnershipCondition {
      ...EoaOwnershipCondition
    }
    ... on ProfileOwnershipCondition {
      ...ProfileOwnershipCondition
    }
    ... on FollowCondition {
      ...FollowCondition
    }
    ... on CollectCondition {
      ...CollectCondition
    }
  }
}

fragment OrCondition on OrCondition {
  criteria {
    ... on NftOwnershipCondition {
      ...NftOwnershipCondition
    }
    ... on Erc20OwnershipCondition {
      ...Erc20OwnershipCondition
    }
    ... on EoaOwnershipCondition {
      ...EoaOwnershipCondition
    }
    ... on ProfileOwnershipCondition {
      ...ProfileOwnershipCondition
    }
    ... on FollowCondition {
      ...FollowCondition
    }
    ... on CollectCondition {
      ...CollectCondition
    }
  }
}

# publication metadata

fragment PublicationImageSet on ImageSet {
  rawURI
  image {
    ...Image
  }
  altTag
  # TODO: uncomment on field resolver fix
  # transformed(input: $publicationImageTransform) {
  #   ...Image
  # }
}

fragment PublicationMarketplaceMetadataAttribute on PublicationMarketplaceMetadataAttribute {
  displayType
  traitType
  value
}

fragment MarketplaceMetadata on MarketplaceMetadata {
  description
  externalURL
  name
  attributes {
    ...PublicationMarketplaceMetadataAttribute
  }
  image
  animationUrl
}

fragment PublicationMetadataMediaVideo on PublicationMetadataMediaVideo {
  videoMimeType: type
  videoItem: item {
    ...VideoSet
  }
  cover {
    ...PublicationImageSet
  }
  duration
  license
}

fragment PublicationMetadataMediaImage on PublicationMetadataMediaImage {
  imageMimeType: type
  imageItem: item {
    ...PublicationImageSet
  }
  license
}

fragment PublicationMetadataMediaAudio on PublicationMetadataMediaAudio {
  type
  item {
    ...AudioSet
  }
  cover {
    ...PublicationImageSet
  }
  duration
  license
  credits
  artist
  genre
  recordLabel
  lyrics
}

fragment PublicationMetadataV2 on PublicationMetadataV2 {
  name
  description
  optionalContent: content
  v2image: image {
    ...PublicationImageSet
  }
  media {
    ... on VideoSet {
      ...VideoSet
    }
    ... on AudioSet {
      ...AudioSet
    }
    ... on ImageSet {
      ...PublicationImageSet
    }
  }
  attributes {
    ...PublicationMarketplaceMetadataAttribute
  }
  locale
  tags
  contentWarning
  v2mainContentFocus: mainContentFocus
  animationUrl
  encryptedWith {
    encryptionKey
    encryptedFields {
      content
      image
      media {
        uri
        mimeType
        altTag
        cover
      }
      animationUrl
      externalUrl
    }
    accessCondition {
      ... on NftOwnershipCondition {
        ...NftOwnershipCondition
      }
      ... on Erc20OwnershipCondition {
        ...Erc20OwnershipCondition
      }
      ... on EoaOwnershipCondition {
        ...EoaOwnershipCondition
      }
      ... on ProfileOwnershipCondition {
        ...ProfileOwnershipCondition
      }
      ... on FollowCondition {
        ...FollowCondition
      }
      ... on CollectCondition {
        ...CollectCondition
      }
      ... on AndCondition {
        ...AndCondition
      }
      ... on OrCondition {
        ...OrCondition
      }
    }
  }
}

fragment VideoMetadataV3 on VideoMetadataV3 {
  id
  rawURI
  locale
  tags
  contentWarning
  hideFromFeed
  globalReach
  appId
  marketplace {
    ...MarketplaceMetadata
  }
  encryptedWith {
    ... on PublicationMetadataV3LitEncryption {
      ...PublicationMetadataV3LitEncryption
    }
  }
  optionalContent: content
  videoMainContentFocus: mainContentFocus
  video {
    ...PublicationMetadataMediaVideo
  }
  attachments {
    ... on PublicationMetadataMediaVideo {
      ...PublicationMetadataMediaVideo
    }
    ... on PublicationMetadataMediaImage {
      ...PublicationMetadataMediaImage
    }
    ... on PublicationMetadataMediaAudio {
      ...PublicationMetadataMediaAudio
    }
  }
}

fragment ImageMetadataV3 on ImageMetadataV3 {
  id
  rawURI
  locale
  tags
  contentWarning
  hideFromFeed
  globalReach
  appId
  marketplace {
    ...MarketplaceMetadata
  }
  encryptedWith {
    ... on PublicationMetadataV3LitEncryption {
      ...PublicationMetadataV3LitEncryption
    }
  }
  optionalContent: content
  imageMainContentFocus: mainContentFocus
  image {
    ...PublicationMetadataMediaImage
  }
  attachments {
    ... on PublicationMetadataMediaVideo {
      ...PublicationMetadataMediaVideo
    }
    ... on PublicationMetadataMediaImage {
      ...PublicationMetadataMediaImage
    }
    ... on PublicationMetadataMediaAudio {
      ...PublicationMetadataMediaAudio
    }
  }
}

fragment ArticleMetadataV3 on ArticleMetadataV3 {
  id
  rawURI
  locale
  tags
  contentWarning
  hideFromFeed
  globalReach
  appId
  marketplace {
    ...MarketplaceMetadata
  }
  encryptedWith {
    ... on PublicationMetadataV3LitEncryption {
      ...PublicationMetadataV3LitEncryption
    }
  }
  content
  optionalTitle: title
  articleMainContentFocus: mainContentFocus
  attachments {
    ... on PublicationMetadataMediaVideo {
      ...PublicationMetadataMediaVideo
    }
    ... on PublicationMetadataMediaImage {
      ...PublicationMetadataMediaImage
    }
    ... on PublicationMetadataMediaAudio {
      ...PublicationMetadataMediaAudio
    }
  }
}

fragment EventMetadataV3 on EventMetadataV3 {
  id
  rawURI
  locale
  tags
  contentWarning
  hideFromFeed
  globalReach
  appId
  marketplace {
    ...MarketplaceMetadata
  }
  encryptedWith {
    ... on PublicationMetadataV3LitEncryption {
      ...PublicationMetadataV3LitEncryption
    }
  }
  optionalContent: content
  eventMainContentFocus: mainContentFocus
  geographic {
    latitude
    longitude
  }
  startsAt
  endsAt
  links
  location
  attachments {
    ... on PublicationMetadataMediaVideo {
      ...PublicationMetadataMediaVideo
    }
    ... on PublicationMetadataMediaImage {
      ...PublicationMetadataMediaImage
    }
    ... on PublicationMetadataMediaAudio {
      ...PublicationMetadataMediaAudio
    }
  }
}

fragment LinkMetadataV3 on LinkMetadataV3 {
  id
  rawURI
  locale
  tags
  contentWarning
  hideFromFeed
  globalReach
  appId
  marketplace {
    ...MarketplaceMetadata
  }
  encryptedWith {
    ... on PublicationMetadataV3LitEncryption {
      ...PublicationMetadataV3LitEncryption
    }
  }
  optionalContent: content
  linkMainContentFocus: mainContentFocus
  sharingLink
  attachments {
    ... on PublicationMetadataMediaVideo {
      ...PublicationMetadataMediaVideo
    }
    ... on PublicationMetadataMediaImage {
      ...PublicationMetadataMediaImage
    }
    ... on PublicationMetadataMediaAudio {
      ...PublicationMetadataMediaAudio
    }
  }
}

fragment EmbedMetadataV3 on EmbedMetadataV3 {
  id
  rawURI
  locale
  tags
  contentWarning
  hideFromFeed
  globalReach
  appId
  marketplace {
    ...MarketplaceMetadata
  }
  encryptedWith {
    ... on PublicationMetadataV3LitEncryption {
      ...PublicationMetadataV3LitEncryption
    }
  }
  optionalContent: content
  embedMainContentFocus: mainContentFocus
  embed
  attachments {
    ... on PublicationMetadataMediaVideo {
      ...PublicationMetadataMediaVideo
    }
    ... on PublicationMetadataMediaImage {
      ...PublicationMetadataMediaImage
    }
    ... on PublicationMetadataMediaAudio {
      ...PublicationMetadataMediaAudio
    }
  }
}

fragment CheckingInMetadataV3 on CheckingInMetadataV3 {
  id
  rawURI
  locale
  tags
  contentWarning
  hideFromFeed
  globalReach
  appId
  marketplace {
    ...MarketplaceMetadata
  }
  encryptedWith {
    ... on PublicationMetadataV3LitEncryption {
      ...PublicationMetadataV3LitEncryption
    }
  }
  optionalContent: content
  checkingInMainContentFocus: mainContentFocus
  location
  geographic {
    latitude
    longitude
  }
  attachments {
    ... on PublicationMetadataMediaVideo {
      ...PublicationMetadataMediaVideo
    }
    ... on PublicationMetadataMediaImage {
      ...PublicationMetadataMediaImage
    }
    ... on PublicationMetadataMediaAudio {
      ...PublicationMetadataMediaAudio
    }
  }
}

fragment TextOnlyMetadataV3 on TextOnlyMetadataV3 {
  id
  rawURI
  locale
  tags
  contentWarning
  hideFromFeed
  globalReach
  appId
  marketplace {
    ...MarketplaceMetadata
  }
  encryptedWith {
    ... on PublicationMetadataV3LitEncryption {
      ...PublicationMetadataV3LitEncryption
    }
  }
  content
  textOnlyMainContentFocus: mainContentFocus
}

fragment ThreeDMetadataV3 on ThreeDMetadataV3 {
  id
  rawURI
  locale
  tags
  contentWarning
  hideFromFeed
  globalReach
  appId
  marketplace {
    ...MarketplaceMetadata
  }
  encryptedWith {
    ... on PublicationMetadataV3LitEncryption {
      ...PublicationMetadataV3LitEncryption
    }
  }
  optionalContent: content
  threeDMainContentFocus: mainContentFocus
  assets {
    uri
    zipPath
    playerURL
    format
    license
  }
  attachments {
    ... on PublicationMetadataMediaVideo {
      ...PublicationMetadataMediaVideo
    }
    ... on PublicationMetadataMediaImage {
      ...PublicationMetadataMediaImage
    }
    ... on PublicationMetadataMediaAudio {
      ...PublicationMetadataMediaAudio
    }
  }
}

fragment StoryMetadataV3 on StoryMetadataV3 {
  id
  rawURI
  locale
  tags
  contentWarning
  hideFromFeed
  globalReach
  appId
  marketplace {
    ...MarketplaceMetadata
  }
  encryptedWith {
    ... on PublicationMetadataV3LitEncryption {
      ...PublicationMetadataV3LitEncryption
    }
  }
  optionalContent: content
  storyMainContentFocus: mainContentFocus
  asset {
    ... on PublicationMetadataMediaVideo {
      ...PublicationMetadataMediaVideo
    }
    ... on PublicationMetadataMediaImage {
      ...PublicationMetadataMediaImage
    }
    ... on PublicationMetadataMediaAudio {
      ...PublicationMetadataMediaAudio
    }
  }
}

fragment TransactionMetadataV3 on TransactionMetadataV3 {
  id
  rawURI
  locale
  tags
  contentWarning
  hideFromFeed
  globalReach
  appId
  marketplace {
    ...MarketplaceMetadata
  }
  encryptedWith {
    ... on PublicationMetadataV3LitEncryption {
      ...PublicationMetadataV3LitEncryption
    }
  }
  optionalContent: content
  transactionMainContentFocus: mainContentFocus
  type
  txHash
  chainId
  attachments {
    ... on PublicationMetadataMediaVideo {
      ...PublicationMetadataMediaVideo
    }
    ... on PublicationMetadataMediaImage {
      ...PublicationMetadataMediaImage
    }
    ... on PublicationMetadataMediaAudio {
      ...PublicationMetadataMediaAudio
    }
  }
}

fragment MintMetadataV3 on MintMetadataV3 {
  id
  rawURI
  locale
  tags
  contentWarning
  hideFromFeed
  globalReach
  appId
  marketplace {
    ...MarketplaceMetadata
  }
  encryptedWith {
    ... on PublicationMetadataV3LitEncryption {
      ...PublicationMetadataV3LitEncryption
    }
  }
  optionalContent: content
  mintMainContentFocus: mainContentFocus
  mintLink
  attachments {
    ... on PublicationMetadataMediaVideo {
      ...PublicationMetadataMediaVideo
    }
    ... on PublicationMetadataMediaImage {
      ...PublicationMetadataMediaImage
    }
    ... on PublicationMetadataMediaAudio {
      ...PublicationMetadataMediaAudio
    }
  }
}

fragment SpaceMetadataV3 on SpaceMetadataV3 {
  id
  rawURI
  locale
  tags
  contentWarning
  hideFromFeed
  globalReach
  appId
  marketplace {
    ...MarketplaceMetadata
  }
  encryptedWith {
    ... on PublicationMetadataV3LitEncryption {
      ...PublicationMetadataV3LitEncryption
    }
  }
  optionalContent: content
  spaceMainContentFocus: mainContentFocus
  title
  link
  startsAt
  attachments {
    ... on PublicationMetadataMediaVideo {
      ...PublicationMetadataMediaVideo
    }
    ... on PublicationMetadataMediaImage {
      ...PublicationMetadataMediaImage
    }
    ... on PublicationMetadataMediaAudio {
      ...PublicationMetadataMediaAudio
    }
  }
}

fragment LiveStreamMetadataV3 on LiveStreamMetadataV3 {
  id
  rawURI
  locale
  tags
  contentWarning
  hideFromFeed
  globalReach
  appId
  marketplace {
    ...MarketplaceMetadata
  }
  encryptedWith {
    ... on PublicationMetadataV3LitEncryption {
      ...PublicationMetadataV3LitEncryption
    }
  }
  optionalContent: content
  liveStreamMainContentFocus: mainContentFocus
  optionalTitle: title
  startsAt
  optionalEndsAt: endsAt
  playbackURL
  liveURL
  checkLiveAPI
  attachments {
    ... on PublicationMetadataMediaVideo {
      ...PublicationMetadataMediaVideo
    }
    ... on PublicationMetadataMediaImage {
      ...PublicationMetadataMediaImage
    }
    ... on PublicationMetadataMediaAudio {
      ...PublicationMetadataMediaAudio
    }
  }
}

# publication fragments
fragment Post on Post {
  id
  publishedOn {
    ...App
  }
  isHidden
  isEncrypted
  momoka {
    ...MomokaInfo
  }
  txHash
  createdAt
  by {
    ...ProfileFields
  }
  operations {
    ...PublicationOperations
  }
  metadata {
    ... on PublicationMetadataV2 {
      ...PublicationMetadataV2
    }
    ... on VideoMetadataV3 {
      ...VideoMetadataV3
    }
    ... on ImageMetadataV3 {
      ...ImageMetadataV3
    }
    ... on ArticleMetadataV3 {
      ...ArticleMetadataV3
    }
    ... on EventMetadataV3 {
      ...EventMetadataV3
    }
    ... on LinkMetadataV3 {
      ...LinkMetadataV3
    }
    ... on EmbedMetadataV3 {
      ...EmbedMetadataV3
    }
    ... on CheckingInMetadataV3 {
      ...CheckingInMetadataV3
    }
    ... on TextOnlyMetadataV3 {
      ...TextOnlyMetadataV3
    }
    ... on ThreeDMetadataV3 {
      ...ThreeDMetadataV3
    }
    ... on StoryMetadataV3 {
      ...StoryMetadataV3
    }
    ... on TransactionMetadataV3 {
      ...TransactionMetadataV3
    }
    ... on MintMetadataV3 {
      ...MintMetadataV3
    }
    ... on SpaceMetadataV3 {
      ...SpaceMetadataV3
    }
    ... on LiveStreamMetadataV3 {
      ...LiveStreamMetadataV3
    }
  }
  openActionModules {
    ... on LegacyFreeCollectModuleSettings {
      ...LegacyFreeCollectModuleSettings
    }
    ... on LegacyFeeCollectModuleSettings {
      ...LegacyFeeCollectModuleSettings
    }
    ... on LegacyLimitedFeeCollectModuleSettings {
      ...LegacyLimitedFeeCollectModuleSettings
    }
    ... on LegacyLimitedTimedFeeCollectModuleSettings {
      ...LegacyLimitedTimedFeeCollectModuleSettings
    }
    ... on LegacyRevertCollectModuleSettings {
      ...LegacyRevertCollectModuleSettings
    }
    ... on LegacyTimedFeeCollectModuleSettings {
      ...LegacyTimedFeeCollectModuleSettings
    }
    ... on LegacyMultirecipientFeeCollectModuleSettings {
      ...LegacyMultirecipientFeeCollectModuleSettings
    }
    ... on LegacySimpleCollectModuleSettings {
      ...LegacySimpleCollectModuleSettings
    }
    ... on LegacyERC4626FeeCollectModuleSettings {
      ...LegacyERC4626FeeCollectModuleSettings
    }
    ... on LegacyAaveFeeCollectModuleSettings {
      ...LegacyAaveFeeCollectModuleSettings
    }
    ... on MultirecipientFeeCollectOpenActionSettings {
      ...MultirecipientFeeCollectOpenActionSettings
    }
    ... on SimpleCollectOpenActionSettings {
      ...SimpleCollectOpenActionSettings
    }
    ... on UnknownOpenActionModuleSettings {
      ...UnknownOpenActionModuleSettings
    }
  }
  referenceModule {
    ... on FollowOnlyReferenceModuleSettings {
      ...FollowOnlyReferenceModuleSettings
    }
    ... on DegreesOfSeparationReferenceModuleSettings {
      ...DegreesOfSeparationReferenceModuleSettings
    }
    ... on UnknownReferenceModuleSettings {
      ...UnknownReferenceModuleSettings
    }
  }
}

fragment CommentBase on Comment {
  id
  publishedOn {
    ...App
  }
  isHidden
  isEncrypted
  momoka {
    ...MomokaInfo
  }
  txHash
  createdAt
  by {
    ...ProfileFields
  }
  # TODO: stats
  # stats {
  #   ...PublicationStats
  # }
  operations {
    ...PublicationOperations
  }
  metadata {
    ... on PublicationMetadataV2 {
      ...PublicationMetadataV2
    }
    ... on VideoMetadataV3 {
      ...VideoMetadataV3
    }
    ... on ImageMetadataV3 {
      ...ImageMetadataV3
    }
    ... on ArticleMetadataV3 {
      ...ArticleMetadataV3
    }
    ... on EventMetadataV3 {
      ...EventMetadataV3
    }
    ... on LinkMetadataV3 {
      ...LinkMetadataV3
    }
    ... on EmbedMetadataV3 {
      ...EmbedMetadataV3
    }
    ... on CheckingInMetadataV3 {
      ...CheckingInMetadataV3
    }
    ... on TextOnlyMetadataV3 {
      ...TextOnlyMetadataV3
    }
    ... on ThreeDMetadataV3 {
      ...ThreeDMetadataV3
    }
    ... on StoryMetadataV3 {
      ...StoryMetadataV3
    }
    ... on TransactionMetadataV3 {
      ...TransactionMetadataV3
    }
    ... on MintMetadataV3 {
      ...MintMetadataV3
    }
    ... on SpaceMetadataV3 {
      ...SpaceMetadataV3
    }
    ... on LiveStreamMetadataV3 {
      ...LiveStreamMetadataV3
    }
  }
  openActionModules {
    ... on LegacyFreeCollectModuleSettings {
      ...LegacyFreeCollectModuleSettings
    }
    ... on LegacyFeeCollectModuleSettings {
      ...LegacyFeeCollectModuleSettings
    }
    ... on LegacyLimitedFeeCollectModuleSettings {
      ...LegacyLimitedFeeCollectModuleSettings
    }
    ... on LegacyLimitedTimedFeeCollectModuleSettings {
      ...LegacyLimitedTimedFeeCollectModuleSettings
    }
    ... on LegacyRevertCollectModuleSettings {
      ...LegacyRevertCollectModuleSettings
    }
    ... on LegacyTimedFeeCollectModuleSettings {
      ...LegacyTimedFeeCollectModuleSettings
    }
    ... on LegacyMultirecipientFeeCollectModuleSettings {
      ...LegacyMultirecipientFeeCollectModuleSettings
    }
    ... on LegacySimpleCollectModuleSettings {
      ...LegacySimpleCollectModuleSettings
    }
    ... on LegacyERC4626FeeCollectModuleSettings {
      ...LegacyERC4626FeeCollectModuleSettings
    }
    ... on LegacyAaveFeeCollectModuleSettings {
      ...LegacyAaveFeeCollectModuleSettings
    }
    ... on MultirecipientFeeCollectOpenActionSettings {
      ...MultirecipientFeeCollectOpenActionSettings
    }
    ... on SimpleCollectOpenActionSettings {
      ...SimpleCollectOpenActionSettings
    }
    ... on UnknownOpenActionModuleSettings {
      ...UnknownOpenActionModuleSettings
    }
  }
  referenceModule {
    ... on FollowOnlyReferenceModuleSettings {
      ...FollowOnlyReferenceModuleSettings
    }
    ... on DegreesOfSeparationReferenceModuleSettings {
      ...DegreesOfSeparationReferenceModuleSettings
    }
    ... on UnknownReferenceModuleSettings {
      ...UnknownReferenceModuleSettings
    }
  }
}

fragment Comment on Comment {
  ...CommentBase
  root {
    ...Post
  }
  commentOn {
    ... on Post {
      ...Post
    }
    ... on Comment {
      ...CommentBase
    }
    ... on Quote {
      ...QuoteBase
    }
  }
  firstComment {
    ...CommentBase
  }
}

fragment Mirror on Mirror {
  id
  publishedOn {
    ...App
  }
  isHidden
  isEncrypted
  momoka {
    ...MomokaInfo
  }
  txHash
  createdAt
  mirrorOf {
    ... on Post {
      ...Post
    }
    ... on Comment {
      ...Comment
    }
    ... on Quote {
      ...Quote
    }
  }
}

fragment QuoteBase on Quote {
  id
  publishedOn {
    ...App
  }
  isHidden
  isEncrypted
  momoka {
    ...MomokaInfo
  }
  txHash
  createdAt
  by {
    ...ProfileFields
  }
  # TODO: stats
  # stats {
  #   ...PublicationStats
  # }

  operations {
    ...PublicationOperations
  }
  metadata {
    ... on PublicationMetadataV2 {
      ...PublicationMetadataV2
    }
    ... on VideoMetadataV3 {
      ...VideoMetadataV3
    }
    ... on ImageMetadataV3 {
      ...ImageMetadataV3
    }
    ... on ArticleMetadataV3 {
      ...ArticleMetadataV3
    }
    ... on EventMetadataV3 {
      ...EventMetadataV3
    }
    ... on LinkMetadataV3 {
      ...LinkMetadataV3
    }
    ... on EmbedMetadataV3 {
      ...EmbedMetadataV3
    }
    ... on CheckingInMetadataV3 {
      ...CheckingInMetadataV3
    }
    ... on TextOnlyMetadataV3 {
      ...TextOnlyMetadataV3
    }
    ... on ThreeDMetadataV3 {
      ...ThreeDMetadataV3
    }
    ... on StoryMetadataV3 {
      ...StoryMetadataV3
    }
    ... on TransactionMetadataV3 {
      ...TransactionMetadataV3
    }
    ... on MintMetadataV3 {
      ...MintMetadataV3
    }
    ... on SpaceMetadataV3 {
      ...SpaceMetadataV3
    }
    ... on LiveStreamMetadataV3 {
      ...LiveStreamMetadataV3
    }
  }
  openActionModules {
    ... on LegacyFreeCollectModuleSettings {
      ...LegacyFreeCollectModuleSettings
    }
    ... on LegacyFeeCollectModuleSettings {
      ...LegacyFeeCollectModuleSettings
    }
    ... on LegacyLimitedFeeCollectModuleSettings {
      ...LegacyLimitedFeeCollectModuleSettings
    }
    ... on LegacyLimitedTimedFeeCollectModuleSettings {
      ...LegacyLimitedTimedFeeCollectModuleSettings
    }
    ... on LegacyRevertCollectModuleSettings {
      ...LegacyRevertCollectModuleSettings
    }
    ... on LegacyTimedFeeCollectModuleSettings {
      ...LegacyTimedFeeCollectModuleSettings
    }
    ... on LegacyMultirecipientFeeCollectModuleSettings {
      ...LegacyMultirecipientFeeCollectModuleSettings
    }
    ... on LegacySimpleCollectModuleSettings {
      ...LegacySimpleCollectModuleSettings
    }
    ... on LegacyERC4626FeeCollectModuleSettings {
      ...LegacyERC4626FeeCollectModuleSettings
    }
    ... on LegacyAaveFeeCollectModuleSettings {
      ...LegacyAaveFeeCollectModuleSettings
    }
    ... on MultirecipientFeeCollectOpenActionSettings {
      ...MultirecipientFeeCollectOpenActionSettings
    }
    ... on SimpleCollectOpenActionSettings {
      ...SimpleCollectOpenActionSettings
    }
    ... on UnknownOpenActionModuleSettings {
      ...UnknownOpenActionModuleSettings
    }
  }
  referenceModule {
    ... on FollowOnlyReferenceModuleSettings {
      ...FollowOnlyReferenceModuleSettings
    }
    ... on DegreesOfSeparationReferenceModuleSettings {
      ...DegreesOfSeparationReferenceModuleSettings
    }
    ... on UnknownReferenceModuleSettings {
      ...UnknownReferenceModuleSettings
    }
  }
  quotedOn {
    ... on Post {
      ...Post
    }
    ... on Comment {
      ...CommentBase
    }
    # TODO: Cannot spread fragment "QuoteBase" within itself via "Quote".
    # ... on Quote {
    #   ...Quote
    # }
  }
}

fragment Quote on Quote {
  ...QuoteBase
  quotedOn {
    ... on Post {
      ...Post
    }
    ... on Comment {
      ...CommentBase
    }
    ... on Quote {
      ...QuoteBase
    }
  }
}

# mutation fragments
fragment EIP712TypedDataDomain on EIP712TypedDataDomain {
  name
  chainId
  version
  verifyingContract
}

fragment EIP712TypedDataField on EIP712TypedDataField {
  name
  type
}

fragment RelaySuccess on RelaySuccess {
  __typename
  txHash
  txId
}

fragment RelayError on RelayError {
  __typename
  reason
}

fragment LensProfileManagerRelayError on LensProfileManagerRelayError {
  reason
}

fragment CreateMomokaPublicationResult on CreateMomokaPublicationResult {
  id
  proof
  momokaId
}
