fragment Erc20Fields on Erc20 {
  __typename
  name
  symbol
  decimals
  address
}

fragment Erc20AmountFields on Erc20Amount {
  __typename
  asset {
    ...Erc20Fields
  }
  value
}

fragment ModuleFeeAmount on ModuleFeeAmount {
  __typename
  asset {
    ...Erc20Fields
  }
  value
}

fragment ReferenceModule on ReferenceModule {
  ... on FollowOnlyReferenceModuleSettings {
    __typename
    contractAddress
  }

  ... on DegreesOfSeparationReferenceModuleSettings {
    __typename
    contractAddress
    commentsRestricted
    degreesOfSeparation
    mirrorsRestricted
  }

  ... on UnknownReferenceModuleSettings {
    __typename
    contractAddress
    referenceModuleReturnData
  }
}

fragment FreeCollectModuleSettings on FreeCollectModuleSettings {
  __typename
  contractAddress
  followerOnly
}

fragment FeeCollectModuleSettings on FeeCollectModuleSettings {
  __typename
  amount {
    ...ModuleFeeAmount
  }
  contractAddress
  followerOnly
  recipient
  referralFee
}

fragment LimitedFeeCollectModuleSettings on LimitedFeeCollectModuleSettings {
  __typename
  amount {
    ...ModuleFeeAmount
  }
  collectLimit
  contractAddress
  followerOnly
  recipient
  referralFee
}

fragment LimitedTimedFeeCollectModuleSettings on LimitedTimedFeeCollectModuleSettings {
  __typename
  amount {
    ...ModuleFeeAmount
  }
  collectLimit
  contractAddress
  followerOnly
  endTimestamp
  recipient
  referralFee
}

fragment RevertCollectModuleSettings on RevertCollectModuleSettings {
  __typename
  contractAddress
}

fragment TimedFeeCollectModuleSettings on TimedFeeCollectModuleSettings {
  __typename
  amount {
    ...ModuleFeeAmount
  }
  contractAddress
  followerOnly
  endTimestamp
  recipient
  referralFee
}

fragment CollectModule on CollectModule {
  __typename

  ... on FreeCollectModuleSettings {
    ...FreeCollectModuleSettings
  }

  ... on FeeCollectModuleSettings {
    ...FeeCollectModuleSettings
  }

  ... on LimitedFeeCollectModuleSettings {
    ...LimitedFeeCollectModuleSettings
  }

  ... on LimitedTimedFeeCollectModuleSettings {
    ...LimitedTimedFeeCollectModuleSettings
  }

  ... on RevertCollectModuleSettings {
    ...RevertCollectModuleSettings
  }

  ... on TimedFeeCollectModuleSettings {
    ...TimedFeeCollectModuleSettings
  }
}

fragment Wallet on Wallet {
  __typename
  address
  defaultProfile {
    ...Profile
  }
}

fragment Media on Media {
  __typename
  altTag
  cover
  mimeType
  url
}

fragment MediaSet on MediaSet {
  __typename
  original {
    ...Media
  }
}

fragment MetadataOutput on MetadataOutput {
  __typename
  animatedUrl
  name
  description
  mainContentFocus
  content
  image
  media {
    ...MediaSet
  }
  attributes {
    ...MetadataAttributeOutput
  }
  encryptionParams {
    ...EncryptionParamsOutput
  }
}

fragment MetadataAttributeOutput on MetadataAttributeOutput {
  __typename
  traitType
  value
}

fragment PublicationStats on PublicationStats {
  __typename
  totalAmountOfMirrors
  totalUpvotes
  totalDownvotes
  totalAmountOfCollects
  totalAmountOfComments
  commentsCount: commentsTotal(forSources: $sources)
}

fragment MirrorBase on Mirror {
  __typename
  id
  createdAt
  profile {
    ...Profile
  }
  hidden # this is currently used by HidePublication use case, keeping it for now
}

fragment Mirror on Mirror {
  __typename
  ...MirrorBase
  mirrorOf {
    ... on Post {
      ...Post
    }

    ... on Comment {
      ...Comment
    }
  }
}

fragment CommentBase on Comment {
  __typename
  id
  stats {
    ...PublicationStats
  }
  metadata {
    ...MetadataOutput
  }
  profile {
    ...Profile
  }
  collectedBy {
    ...Wallet
  }
  collectModule {
    ...CollectModule
  }
  collectNftAddress
  referenceModule {
    ...ReferenceModule
  }
  createdAt
  hidden
  isGated
  reaction(request: { profileId: $observerId })
  hasCollectedByMe(isFinalisedOnChain: true)
  canComment(profileId: $observerId) {
    result
  }
  canMirror(profileId: $observerId) {
    result
  }
  canObserverDecrypt: canDecrypt(profileId: $observerId) {
    result
    reasons
  }
  mirrors(by: $observerId)

  hasOptimisticCollectedByMe @client
  isOptimisticMirroredByMe @client
  collectPolicy @client
  referencePolicy @client
  decryptionCriteria @client
}

fragment CommonPaginatedResultInfo on PaginatedResultInfo {
  __typename
  prev
  next
  totalCount
}

fragment Comment on Comment {
  __typename
  ...CommentBase
  commentOn {
    ... on Post {
      ...Post
    }

    # we do not want to promote comments on mirrors, should we remove this?
    ... on Mirror {
      ...MirrorBase
    }

    ... on Comment {
      ...CommentBase
    }
  }
  mainPost {
    ... on Post {
      ...Post
    }

    # we do not want to promote comments on mirrors, should we remove this?
    ... on Mirror {
      ...MirrorBase
    }
  }
}

fragment Post on Post {
  __typename
  id
  stats {
    ...PublicationStats
  }
  metadata {
    ...MetadataOutput
  }
  profile {
    ...Profile
  }
  collectedBy {
    ...Wallet
  }
  collectModule {
    ...CollectModule
  }
  collectNftAddress
  referenceModule {
    ...ReferenceModule
  }
  createdAt
  hidden
  isGated
  reaction(request: { profileId: $observerId })
  hasCollectedByMe(isFinalisedOnChain: true)
  canComment(profileId: $observerId) {
    result
  }
  canMirror(profileId: $observerId) {
    result
  }
  mirrors(by: $observerId)
  canObserverDecrypt: canDecrypt(profileId: $observerId) {
    result
    reasons
  }

  hasOptimisticCollectedByMe @client
  isOptimisticMirroredByMe @client
  collectPolicy @client
  referencePolicy @client
  decryptionCriteria @client
}

fragment PendingPost on PendingPost {
  __typename
  id
  content
  media {
    ...Media
  }
  profile {
    ...Profile
  }
  locale
  mainContentFocus
}

fragment EIP712TypedDataDomain on EIP712TypedDataDomain {
  __typename
  name
  chainId
  version
  verifyingContract
}
