fragment Erc20 on Erc20 {
  name
  symbol
  decimals
  address
}

fragment ModuleFeeAmount on ModuleFeeAmount {
  asset {
    ...Erc20
  }
  value
}

fragment ReferenceModule on ReferenceModule {
  ... on FollowOnlyReferenceModuleSettings {
    contractAddress
  }
}

fragment FreeCollectModuleSettings on FreeCollectModuleSettings {
  contractAddress
  followerOnly
}

fragment FeeCollectModuleSettings on FeeCollectModuleSettings {
  amount {
    ...ModuleFeeAmount
  }
  contractAddress
  followerOnly
  recipient
  referralFee
}

fragment LimitedFeeCollectModuleSettings on LimitedFeeCollectModuleSettings {
  amount {
    ...ModuleFeeAmount
  }
  collectLimit
  contractAddress
  followerOnly
  recipient
  referralFee
}

fragment LimitedTimedFeeCollectModuleSettings on LimitedTimedFeeCollectModuleSettings {
  amount {
    ...ModuleFeeAmount
  }
  collectLimit
  contractAddress
  followerOnly
  endTimestamp
  recipient
  referralFee
}

fragment RevertCollectModuleSettings on RevertCollectModuleSettings {
  contractAddress
}

fragment TimedFeeCollectModuleSettings on TimedFeeCollectModuleSettings {
  amount {
    ...ModuleFeeAmount
  }
  contractAddress
  followerOnly
  endTimestamp
  recipient
  referralFee
}

fragment CollectModule on CollectModule {
  __typename

  ... on FreeCollectModuleSettings {
    ...FreeCollectModuleSettings
  }

  ... on FeeCollectModuleSettings {
    ...FeeCollectModuleSettings
  }

  ... on LimitedFeeCollectModuleSettings {
    ...LimitedFeeCollectModuleSettings
  }

  ... on LimitedTimedFeeCollectModuleSettings {
    ...LimitedTimedFeeCollectModuleSettings
  }

  ... on RevertCollectModuleSettings {
    ...RevertCollectModuleSettings
  }

  ... on TimedFeeCollectModuleSettings {
    ...TimedFeeCollectModuleSettings
  }
}

fragment Wallet on Wallet {
  address
  defaultProfile {
    ...ProfileFields
  }
}

fragment Metadata on MetadataOutput {
  name
  description
  mainContentFocus
  content
  media {
    ...MediaSet
  }
  attributes {
    ...MetadataAttributeOutput
  }
}

fragment MetadataAttributeOutput on MetadataAttributeOutput {
  traitType
  value
}

fragment PublicationStats on PublicationStats {
  totalAmountOfMirrors
  totalUpvotes
  totalAmountOfCollects
  totalAmountOfComments
}

fragment MirrorBase on Mirror {
  __typename
  id
  stats {
    ...PublicationStats
  }
  metadata {
    ...Metadata
  }
  profile {
    ...ProfileFields
  }
  collectModule {
    ...CollectModule
  }
  referenceModule {
    ...ReferenceModule
  }
  createdAt
  hidden
  isGated
  reaction(request: { profileId: $observerId })
  hasCollectedByMe(isFinalisedOnChain: true)
  canComment(profileId: $observerId) {
    result
  }
  canMirror(profileId: $observerId) {
    result
  }

  hasOptimisticCollectedByMe @client
  isOptimisticMirroredByMe @client # just to keep Publication type consistent, that will never be used
  ownedByMe @client
}

fragment Mirror on Mirror {
  ...MirrorBase
  mirrorOf {
    ... on Post {
      ...Post
    }

    ... on Comment {
      ...Comment
    }
  }
}

fragment CommentBase on Comment {
  __typename
  id
  stats {
    ...PublicationStats
  }
  metadata {
    ...Metadata
  }
  profile {
    ...ProfileFields
  }
  collectedBy {
    ...Wallet
  }
  collectModule {
    ...CollectModule
  }
  referenceModule {
    ...ReferenceModule
  }
  createdAt
  hidden
  isGated
  reaction(request: { profileId: $observerId })
  hasCollectedByMe(isFinalisedOnChain: true)
  canComment(profileId: $observerId) {
    result
  }
  canMirror(profileId: $observerId) {
    result
  }
  mirrors(by: $observerId)

  hasOptimisticCollectedByMe @client
  isOptimisticMirroredByMe @client
  ownedByMe @client
}

fragment CommonPaginatedResultInfo on PaginatedResultInfo {
  prev
  next
  totalCount
}

fragment Comment on Comment {
  __typename
  ...CommentBase
  commentOn {
    ... on Post {
      ...Post
    }

    ... on Mirror {
      ...MirrorBase
    }

    ... on Comment {
      ...CommentBase
    }
  }
  mainPost {
    ... on Post {
      ...Post
    }

    ... on Mirror {
      ...MirrorBase
    }
  }
}

fragment Post on Post {
  __typename
  id
  stats {
    ...PublicationStats
  }
  metadata {
    ...Metadata
  }
  profile {
    ...ProfileFields
  }
  collectedBy {
    ...Wallet
  }
  collectModule {
    ...CollectModule
  }
  referenceModule {
    ...ReferenceModule
  }
  createdAt
  hidden
  isGated
  reaction(request: { profileId: $observerId })
  hasCollectedByMe(isFinalisedOnChain: true)
  canComment(profileId: $observerId) {
    result
  }
  canMirror(profileId: $observerId) {
    result
  }
  mirrors(by: $observerId)

  hasOptimisticCollectedByMe @client
  isOptimisticMirroredByMe @client
  ownedByMe @client
}

fragment EIP712TypedDataDomain on EIP712TypedDataDomain {
  name
  chainId
  version
  verifyingContract
}
